context:
  test_character_delay: 10
timeouts:
  job:
    minutes: 180
  action:
    minutes: 10
  connection:
    minutes: 2
visibility: public
device_type: x15
job_name: android-lcr-reference-x15-o-38-vellamo3
priority: low
metadata:
  android.build: 38
  android.name: android-lcr-reference-x15-o
  android.url: https://ci.linaro.org/job/android-lcr-reference-x15-o/38/
  android.fastboot: platform-tools_r27.0.1
protocols:
  lava-lxc:
    name: lxc-target
    template: ubuntu
    distribution: ubuntu
    release: xenial
    arch: amd64
actions:
- deploy:
    namespace: tlxc
    timeout:
      minutes: 15
    to: lxc
    packages:
    - wget
    - zip
    - unzip
    os: ubuntu
- boot:
    namespace: tlxc
    prompts:
    - root@(.*):/#
    - console:/
    - :/
    timeout:
      minutes: 5
    method: lxc
- test:
    namespace: tlxc
    timeout:
      minutes: 10
    definitions:
    - repository: https://git.linaro.org/qa/test-definitions.git
      from: git
      path: automated/linux/android-platform-tools/install.yaml
      name: install-android-platform-tools-r2701
      parameters:
        LINK: https://dl.google.com/android/repository/platform-tools_r27.0.1-linux.zip

- deploy:
    timeout:
      minutes: 15
    to: fastboot
    namespace: target
    connection: lxc
    images:
      boot:
        url: http://fileserver/x15/android/boot_fit.img
      vendor:
        url: http://fileserver/x15/android/vendor.img
      userdata:
        url: http://fileserver/x15/android/userdata.img
      system:
        url: http://fileserver/x15/android/system.img
    os: debian

- boot:
    namespace: target
    prompts:
    - root@(.*):/#
    - hikey:/
    - console:/
    timeout:
      minutes: 15
    method: fastboot

- test:
    namespace: tlxc
    timeout:
      minutes: 175
    definitions:
    - repository: https://git.linaro.org/qa/test-definitions.git
      from: git
      path: automated/android/apk-automation/apk-automation.yaml
      name: gearses2eclair
      params:
        TEST_NAME: gearses2eclair
        BASE_URL: http://fileserver/x15/android/
        LOOPS: 2
    - repository: https://git.linaro.org/qa/test-definitions.git
      from: git
      path: automated/android/apk-automation/apk-automation.yaml
      name: antutu6
      params:
        TEST_NAME: antutu6
        BASE_URL: http://fileserver/x15/android/
        LOOPS: 2
    - repository: https://git.linaro.org/qa/test-definitions.git
      from: git
      path: automated/android/apk-automation/apk-automation.yaml
      name: gearses2eclair
      params:
        TEST_NAME: gearses2eclair
        BASE_URL: http://fileserver/x15/android/
        LOOPS: 2
    - repository: https://git.linaro.org/qa/test-definitions.git
      from: git
      path: automated/android/apk-automation/apk-automation.yaml
      name: vellamo3
      params:
        TEST_NAME: vellamo3
        BASE_URL: http://fileserver/x15/android/
        LOOPS: 2
